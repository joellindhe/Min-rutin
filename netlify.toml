[build]
  command = "npm run build"
  publish = "dist"
  # Skip builds for non-main branches and when no relevant app files changed
  ignore = "bash -c 'if [ \"$BRANCH\" != \"main\" ]; then exit 0; fi; if [ -z \"$CACHED_COMMIT_REF\" ]; then exit 1; fi; git diff --quiet \"$CACHED_COMMIT_REF\" \"$COMMIT_REF\" -- src public vite.config.ts package.json'"

# Optional: production context (can customize later if needed)
[context.production]
  command = "npm run build"
  publish = "dist"